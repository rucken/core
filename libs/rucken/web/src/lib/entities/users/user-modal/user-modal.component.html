<form
    [formGroup]="form"
    novalidate>
    <prompt-form-modal
        [title]="title"
        [message]="message"
        [infoMessage]="infoMessage"
        [errorMessage]="errorMessage"
        [noTitle]="noTitle"
        [yesTitle]="yesTitle"
        [readonly]="readonly"
        (no)="onNoClick()"
        (yes)="onYesClick()"
        [data]="data"
        [processing]="processing$ | async"
        [yesClass]="yesClass$ | async"
        [noClass]="noClass$ | async">
        <div class="row">
            <div [ngClass]="{ 'col-md-6': !simpleMode, 'col-md-12': simpleMode }">
                <div class="row">
                    <div class="col-md-12">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="username"
                            [title]="strings.username">
                            <input
                                formControlName="username"
                                [readonly]="readonly"
                                focused>
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="email"
                            [title]="strings.email">
                            <input
                                formControlName="email"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="dateOfBirth"
                            [title]="strings.dateOfBirth">
                            <input
                                bsDatepicker
                                formControlName="dateOfBirth"
                                [isDisabled]="readonly"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="password"
                            [title]="strings.password">
                            <input
                                formControlName="password"
                                type="password"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="rePassword"
                            [title]="strings.rePassword">
                            <input
                                formControlName="rePassword"
                                type="password"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="lastName"
                            [title]="strings.lastName">
                            <input
                                formControlName="lastName"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                    <div class="col-md-6">
                        <form-group
                            [checkIsDirty]="checkIsDirty"
                            [form]="form"
                            name="firstName"
                            [title]="strings.firstName">
                            <input
                                formControlName="firstName"
                                [readonly]="readonly">
                        </form-group>
                    </div>
                </div>
            </div>
            <div
                class="col-md-6"
                *ngIf="!simpleMode">
                <form-group
                    [checkIsDirty]="checkIsDirty"
                    [title]="strings.roles">
                    <div class="checkboxes-group form-control">
                        <div class="checkbox">
                            <label>
                                <input
                                    formControlName="isActive"
                                    type="checkbox"
                                    [readonly]="readonly"
                                    [disableControl]="readonly || !('change_user' | perm: false | async)">
                                {{ strings.isActive | translate }}
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input
                                    formControlName="isStaff"
                                    type="checkbox"
                                    [readonly]="readonly"
                                    [disableControl]="readonly || !('change_user' | perm: false | async)">
                                {{ strings.isStaff | translate }}
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input
                                    formControlName="isSuperuser"
                                    type="checkbox"
                                    [readonly]="readonly"
                                    [disableControl]="readonly || !('change_user' | perm: false | async)">
                                {{ strings.isSuperuser | translate }}
                            </label>
                        </div>
                    </div>
                </form-group>
            </div>
            <div
                class="col-md-6"
                *ngIf="!simpleMode">
                <user-groups-grid
                    [mockedItems]="data.groups"
                    (mockedItemsChange)="form.get('groups').setValue($event)"
                    [readonly]="readonly"
                    [title]="strings.groups"
                    [apiUrl]="apiUrl"></user-groups-grid>
            </div>
        </div>
    </prompt-form-modal>
</form>
